 Mdnotes File Name: [[Wu_2022_SATMACSelfAdaptive]]

## 总结
背景：基于TDMA
目的：优化信道冲突，优化信道利用率
工作：设计帧信息结构，制定时隙维护信息的规则，检测两跳内的碰撞问题，根据三跳邻居粗略信息设定时隙安全性，不安全时隙的节点进行时隙调整。提出自适应帧长，设定阈值，根据情况在帧尾调整帧长。

## 结构
第三节介绍了SATMAC的概况。第四节介绍了时隙状态的更新策略。第五节介绍了时隙调整。第六节介绍了自适应帧长的设计。第七部分对性能进行了理论分析第八部分给出了模拟和真实实验的结果。第九节对本文的研究进行了总结并对未来的工作提出了建议。

## 协议
1.  每个节点每帧占一个时隙作为基本时隙(BS)，并广播帧信息（FI）。节点利用接收到的FI和每个时隙的本地维护信息获得两跳邻居信息。每个节点估计三跳邻居中占用相同时隙的节点数，评估时隙占用安全性，以检测潜在的碰撞。
2.  每个节点根据其3HS中的节点密度进行基于二进制的帧长调整。每个节点只根据FI的时隙信息来调整自己的BS和帧长。

### 帧结构
![[Pasted image 20230330171108.png|500]]
此节点的帧长和ID，时隙0-n的维护信息，每个时隙的维护信息包括：当前占用此时隙的状态和ID，两跳邻居中占用此时隙的节点。

### 接收FI后的时隙状态转换规则
1 )无碰撞情况下的状态转换：

转换1：(空闲到一跳)：来自一跳邻居的FI，此节点时隙状态设置为一跳，并标记发送FI的ID。
转换2：(空闲到两跳)：来自发送方的一跳邻居的FI，时隙状态设置为两跳，并标记发送FI的ID。
转换3：(两跳到一跳)：本地时隙状态为两跳，且占用者为FI的发送方，则本地时隙状态设置为一跳。

如果一个节点只能间歇性地从它的一个邻居接收FIs，时隙的状态变得不稳定并导致潜在的时隙碰撞。为了缓解这个问题，SATMAC为每个占用时隙的状态设置一个定时器，当定时器为0时刷新为空闲时隙。若FI中时隙状态与本地一致则刷新计时器。
缺点：削弱拓扑变化感知。

转换4：(一跳到两跳或空闲)：当时隙状态为一跳且计时器过期时，如果最后一帧接收到任何FI表示当前时隙状态为一跳且用户ID一致（一跳邻居的邻居，为当前时隙的两跳邻居），则刷新计时器并将此时隙状态设置为两跳。不一致，则将状态设置为空闲，并将ID设置为0。
转换5：(两跳/碰撞到空闲)：时隙状态为两跳或碰撞且计时器过期时，则设置为空闲，ID设置为0。
转换6：(一跳/两跳到空闲)：如果时隙状态为一跳或二跳，FI中接收到的时隙状态为空闲，且ID等于FI的发送方，则设置为空闲，ID设置为0。

2 )碰撞案例中的碰撞检测与状态转换：

转换7：(占用转换)：当FI中槽状态为碰撞时，如果占用者ID与FI中不一致，则说明两跳中有碰撞，将时隙_ s状态设置为两跳，根据FI设置占用者ID。

### 时隙采集与调整的状态转换

转换8：(时隙获取)：若节点x占用空闲时隙，则将x中Sl时隙状态设置为self，占用者ID设置为自己。
转换9：(时隙调整)：当节点k将其自己的时隙调整为空闲时隙s，则自己的时隙状态设置为空闲，其占用ID设置为0。将s设置为self，其占用者ID设置为k。

## 自适应帧长
问题：
1 )保证执行帧长调整过程时或不同帧长的节点进入同一2HS时时隙描述的一致性。
2 )避免帧长调整中的连锁反应，提高协议的可扩展性和灵活性，防止帧长调整引起的数据包碰撞。

解决：
1）每个节点在一帧的末尾进行长度调整，加倍或减半。
2）设定阈值调整规则：
- 高于三跳阈值，**帧长加倍**
- 小于两跳和三跳阈值：
	- 时隙属于后半帧，在前半帧随机挑选一个时隙，
		- 若不安全，则调整到其候选安全时隙；
	- 时隙不属于后半帧且后半帧空闲，**帧长减半**；
- 其他情况帧长不变